<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ุฏููู ุงูุณุงุฆู ููููุงุทู ุฐุงุช ุงูุทูุจ ุงูุนุงูู ูู ุนูุงู - ุชุทุจูู ููุณุงุนุฏุฉ ุงูุณุงุฆููู ุนูู ุฅูุฌุงุฏ ุงูููุงุทู ุฐุงุช ุงูุทูุจ ุงูุนุงูู">
    <meta name="theme-color" content="#4361ee">
    <title>ุฏููู ุงูุณุงุฆู ููููุงุทู ุฐุงุช ุงูุทูุจ ุงูุนุงูู - ุนูุงู</title>
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.0.2/dist/maplibre-gl.css" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="driver-container">
        <!-- Driver-Optimized Header -->
        <header class="driver-header">
            <div class="header-main">
                <h1>๐ ุฏููู ุงูุณุงุฆู</h1>
                <div class="voice-controls">
                    <button id="voice-toggle" class="voice-btn" aria-label="ุชูุนูู/ุฅููุงู ุงูุตูุช">
                        ๐
                    </button>
                    <button id="emergency-btn" class="emergency-btn" aria-label="ุทูุงุฑุฆ">
                        ๐จ
                    </button>
                </div>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-icon">๐</span>
                    <span id="current-area-display" class="status-text">ุฌุงุฑู ุงูุชุญุฏูุฏ...</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">โฐ</span>
                    <span id="demand-mode-display" class="status-text">ุฌุงุฑู ุงูุชุญููู...</span>
                </div>
            </div>
        </header>

        <!-- Driver Dashboard -->
        <div class="driver-dashboard">
            <!-- Primary Action Card -->
            <div class="action-card primary-card">
                <div class="card-header">
                    <h2>๐ฏ ุงูููุทูุฉ ุงูููุชุฑุญุฉ</h2>
                    <div class="demand-indicator" id="demand-indicator">
                        <span class="demand-level" id="demand-level">--</span>
                    </div>
                </div>
                <div class="card-content">
                    <div class="suggested-zone" id="suggested-zone-display">ุฌุงุฑู ุงูุจุญุซ...</div>
                    <div class="zone-details" id="zone-details">
                        <span class="distance" id="suggested-distance">--</span>
                        <span class="eta" id="suggested-eta">--</span>
                    </div>
                </div>
                <div class="card-actions">
                    <button id="navigate-btn" class="action-btn primary-btn" disabled>
                        ๐งญ ุชูุฌู ุงูุขู
                    </button>
                    <button id="refresh-suggestion" class="action-btn secondary-btn">
                        ๐ ุชุญุฏูุซ
                    </button>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button id="find-nearest" class="quick-btn">
                    <span class="btn-icon">๐</span>
                    <span class="btn-text">ุฃูุฑุจ ููุทูุฉ</span>
                </button>
                <button id="high-demand-filter" class="quick-btn toggle-btn">
                    <span class="btn-icon">๐ฅ</span>
                    <span class="btn-text">ุทูุจ ุนุงูู ููุท</span>
                </button>
                <button id="voice-navigation" class="quick-btn">
                    <span class="btn-icon">๐ค</span>
                    <span class="btn-text">ุงูุชูุฌูู ุงูุตูุชู</span>
                </button>
                <button id="safety-mode" class="quick-btn toggle-btn">
                    <span class="btn-icon">๐ก๏ธ</span>
                    <span class="btn-text">ูุถุน ุงูุฃูุงู</span>
                </button>
            </div>
        </div>

        <!-- Map Container -->
        <div id="map" class="driver-map" aria-label="ุฎุฑูุทุฉ ุงูููุงุทู" role="application"></div>

        <!-- Bottom Panel -->
        <div class="bottom-panel">
            <div class="panel-tabs">
                <button class="tab-btn active" data-tab="zones">ุงูููุงุทู</button>
                <button class="tab-btn" data-tab="settings">ุงูุฅุนุฏุงุฏุงุช</button>
                <button class="tab-btn" data-tab="debug">ุงูุชุดุฎูุต</button>
            </div>

            <!-- Zones Tab -->
            <div class="tab-content active" id="zones-tab">
                <div class="zones-header">
                    <h3>ุงูููุงุทู ุงููุชุงุญุฉ</h3>
                    <div class="zones-filter">
                        <select id="zone-sort" class="filter-select">
                            <option value="demand">ุญุณุจ ุงูุทูุจ</option>
                            <option value="distance">ุญุณุจ ุงููุณุงูุฉ</option>
                            <option value="name">ุญุณุจ ุงูุงุณู</option>
                        </select>
                    </div>
                </div>
                <div id="zones-grid" class="zones-grid" aria-label="ูุงุฆูุฉ ุงูููุงุทู"></div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settings-tab">
                <div class="settings-section">
                    <h3>ุฅุนุฏุงุฏุงุช ุงูุตูุช</h3>
                    <div class="setting-item">
                        <label for="voice-enabled">ุชูุนูู ุงูุชูุจููุงุช ุงูุตูุชูุฉ</label>
                        <input type="checkbox" id="voice-enabled" checked>
                    </div>
                    <div class="setting-item">
                        <label for="voice-volume">ูุณุชูู ุงูุตูุช</label>
                        <input type="range" id="voice-volume" min="0" max="100" value="70">
                    </div>
                    <div class="setting-item">
                        <label for="voice-language">ูุบุฉ ุงูุชูุจููุงุช</label>
                        <select id="voice-language">
                            <option value="ar">ุงูุนุฑุจูุฉ</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>ุฅุนุฏุงุฏุงุช ุงูููุงุฏุฉ</h3>
                    <div class="setting-item">
                        <label for="safety-mode-setting">ูุถุน ุงูุฃูุงู</label>
                        <input type="checkbox" id="safety-mode-setting">
                    </div>
                    <div class="setting-item">
                        <label for="auto-refresh">ุงูุชุญุฏูุซ ุงูุชููุงุฆู</label>
                        <input type="checkbox" id="auto-refresh" checked>
                    </div>
                    <div class="setting-item">
                        <label for="map-style-setting">ููุท ุงูุฎุฑูุทุฉ</label>
                        <select id="map-style-setting">
                            <option value="osm">ุนุงุฏู</option>
                            <option value="satellite">ููุฑ ุตูุงุนู</option>
                            <option value="dark">ุฏุงูู</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Debug Tab -->
            <div class="tab-content" id="debug-tab">
                <div class="debug-section">
                    <h3>ูุนูููุงุช ุงููุธุงู</h3>
                    <div class="debug-grid">
                        <div class="debug-item">
                            <span class="debug-label">ุญุงูุฉ ุงูุชุทุจูู:</span>
                            <span id="app-state" class="debug-value">ุชููุฆุฉ</span>
                        </div>
                        <div class="debug-item">
                            <span class="debug-label">ุญุงูุฉ ุงููููุน:</span>
                            <span id="location-state" class="debug-value">ุบูุฑ ูุญุฏุฏ</span>
                        </div>
                        <div class="debug-item">
                            <span class="debug-label">ุฏูุฉ ุงููููุน:</span>
                            <span id="location-accuracy" class="debug-value">--</span>
                        </div>
                        <div class="debug-item">
                            <span class="debug-label">ุนุฏุฏ ุงูููุงุทู:</span>
                            <span id="zones-count" class="debug-value">--</span>
                        </div>
                    </div>
                    <div class="debug-actions">
                        <button id="test-voice" class="debug-btn">ุงุฎุชุจุงุฑ ุงูุตูุช</button>
                        <button id="force-reload" class="debug-btn">ุฅุนุงุฏุฉ ุชุญููู</button>
                        <button id="export-logs" class="debug-btn">ุชุตุฏูุฑ ุงูุณุฌูุงุช</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio Elements -->
        <audio id="notification-sound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>

        <!-- Voice Alerts Container -->
        <div id="voice-alerts" class="voice-alerts" aria-live="polite"></div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <div class="loading-text">ุฌุงุฑู ุชุญููู ุงูุชุทุจูู...</div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast" class="toast" role="alert" aria-live="assertive"></div>
    </div>

    <script src="https://unpkg.com/maplibre-gl@4.0.2/dist/maplibre-gl.js"></script>
    <script src="app.js"></script>
</body>
</html>
